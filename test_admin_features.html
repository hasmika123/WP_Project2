<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Features Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 10px;
            border-radius: 4px;
            cursor: pointer;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <h1>Admin Dashboard Features Test</h1>
    
    <div class="test-section">
        <h2>User Role Testing</h2>
        <p>Test different user roles to verify dropdown menu visibility:</p>
        <button class="test-button" onclick="testAdminRole()">Test Admin Role</button>
        <button class="test-button" onclick="testPlayerRole()">Test Player Role</button>
        <button class="test-button" onclick="openAdminDashboard()">Open Admin Dashboard</button>
        <div id="roleStatus"></div>
    </div>

    <div class="test-section">
        <h2>Configuration Testing</h2>
        <p>Test admin configuration changes:</p>
        <button class="test-button" onclick="testConfigurationSave()">Test Configuration Save</button>
        <button class="test-button" onclick="testConfigurationLoad()">Test Configuration Load</button>
        <div id="configStatus"></div>
    </div>

    <div class="test-section">
        <h2>Data Verification</h2>
        <p>Verify real data vs mock data:</p>
        <button class="test-button" onclick="checkUserData()">Check User Data</button>
        <button class="test-button" onclick="checkGameStats()">Check Game Statistics</button>
        <div id="dataStatus"></div>
    </div>

    <script>
        function testAdminRole() {
            const adminUser = {
                username: 'admin',
                role: 'Administrator',
                email: 'admin@example.com'
            };
            localStorage.setItem('fifteenPuzzleCurrentUser', JSON.stringify(adminUser));
            updateStatus('roleStatus', 'Admin role set successfully', 'success');
        }

        function testPlayerRole() {
            const playerUser = {
                username: 'player',
                role: 'Player',
                email: 'player@example.com'
            };
            localStorage.setItem('fifteenPuzzleCurrentUser', JSON.stringify(playerUser));
            updateStatus('roleStatus', 'Player role set successfully', 'success');
        }

        function openAdminDashboard() {
            window.open('admin.html', '_blank');
        }

        function testConfigurationSave() {
            const testConfig = {
                gameSize: 4,
                backgroundImage: 'test.jpg',
                allowShuffle: true,
                enableAnimations: true,
                enableSounds: false,
                timerEnabled: true,
                hintsEnabled: false
            };
            localStorage.setItem('fifteenPuzzleConfig', JSON.stringify(testConfig));
            updateStatus('configStatus', 'Test configuration saved successfully', 'success');
        }

        function testConfigurationLoad() {
            const config = localStorage.getItem('fifteenPuzzleConfig');
            if (config) {
                const parsedConfig = JSON.parse(config);
                updateStatus('configStatus', `Configuration loaded: ${Object.keys(parsedConfig).length} settings found`, 'success');
            } else {
                updateStatus('configStatus', 'No configuration found in localStorage', 'error');
            }
        }

        function checkUserData() {
            const users = localStorage.getItem('fifteenPuzzleUsers');
            if (users) {
                const parsedUsers = JSON.parse(users);
                updateStatus('dataStatus', `Found ${parsedUsers.length} users in localStorage`, 'success');
            } else {
                updateStatus('dataStatus', 'No user data found - this indicates real data is being used', 'success');
            }
        }

        function checkGameStats() {
            const gameStats = localStorage.getItem('fifteenPuzzleGameStats');
            if (gameStats) {
                const parsedStats = JSON.parse(gameStats);
                updateStatus('dataStatus', `Found ${parsedStats.length} game records in localStorage`, 'success');
            } else {
                updateStatus('dataStatus', 'No game statistics found - clean state', 'success');
            }
        }

        function updateStatus(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.className = `status ${type}`;
            element.textContent = message;
        }

        // Initialize with current user info
        window.addEventListener('load', function() {
            const currentUser = localStorage.getItem('fifteenPuzzleCurrentUser');
            if (currentUser) {
                const user = JSON.parse(currentUser);
                updateStatus('roleStatus', `Current user: ${user.username} (${user.role})`, 'success');
            } else {
                updateStatus('roleStatus', 'No current user set', 'error');
            }
        });
    </script>
</body>
</html>
